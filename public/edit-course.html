<link rel="import" href="bower_components/polymer/polymer.html">
<link rel="import" href="bower_components/iron-ajax/iron-request.html">
<link rel="import" href="bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="course.html">
<dom-module id="editCourse-Form">
    <template>
        <div class="row">
            <div class="col-md-offset-1">
                <legend>{{name}}</legend>
                <h2>Edit the Course</h2>
                <form action="" class="form-horizontal">

                    <input type="hidden" name="courseName" id="courseName" value={{name}}>
                    <input type="hidden" name="courseID" id="id" value={{id}}>

                    <div class="form-group">
                        <label for="name" class="col-lg-2">Change Course Name</label>
                        <div class="col-lg-5 input-lg">
                            <input class="form-control" type="text" id="name" placeholder="Course Name">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="instrutor" class="col-lg-2">Change Instructor Name</label>
                        <div class="col-lg-5 input-lg">
                            <input class="form-control" type="text" id="instrutor" placeholder="Instructor">
                        </div>
                    </div>



                    <div class="form-group">
                        <label for="minimumGrade" class="col-lg-2">Change Minimum Grade Required</label>
                        <div class="col-lg-5 input-lg">
                            <input class="form-control" style="width:30% " type="number" min="0" max="100" id="minimumGrade" placeholder="Minimum Grade">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="wantedGrade" class="col-lg-2">Change Grade Wanted</label>
                        <div class="col-lg-5 input-lg">
                            <input class="form-control" style="width:30% " type="number" min="0" max="100" id="wantedGrade" placeholder="Grade Wanted">
                        </div>
                    </div>

                    <div class="col-md-offset-2">
                        <button type="button" class="btn btn-success btn-sm" id="assignment">Add Assignment</button>
                    </div>

                    <!--Where the marks will go (test and %, exam and %, project and %, etc)-->
                    <div class="marks"></div>
                    <br/></br>
                    <div class="col-md-offset-2">
                        <button type="submit" class="btn btn-warning" id="submit">Submit</button>
                    </div>
                </form>
            </div>
        </div>
        <iron-ajax
                id="ajax"
                url=""
                method="post"
                on-response="postComplete">
        </iron-ajax>
    </template>
    <script>
        var assignmentcounter = 1;

        Polymer({
            is: 'editCourse-Form',
            ready: function () {

            },
            properties: {},
            listeners: {
                'assignment.click': 'addAssignment',
                'submit': 'updateCourse'
            },
            updateCourse: function(){
                //where we will update the course info.

                this.$.ajax.url="/updateCourse";
                var newCourse_Name = $('#name').val();
                var instructor = $('#instrutor').val();

                var course_name = $('#courseName').val();
                var courseID = $('#id').val();

                var minGrade = $('#minimumGrade').val();
                var wantedGrade = $('#wantedGrade').val();
                this.$.ajax.params={'newCourseName':newCourse_Name, 'instructorName':instructor, 'gradeRequired':minGrade, 'gradeDesired':wantedGrade, 'courseName':course_name, 'courseID':courseID};
                this.$.ajax.generateRequest();

            },
            addAssignment: function(){
                $('.marks').append("<add-assignment>");
                $('.marks').find('#assignment').attr('id', "assignment" + assignmentcounter);

                assignmentcounter++;
            },
            postComplete:function(){
                var assignments = request.detail.response;
                var assignList = $('<table><th>Name</th><th>Description</th><th>Value</th></table>');
                $.each(assignments, function(i,item){

                });
            }
        });
    </script>
</dom-module>





<!--DOM ELEMENTS FOR WHAT THE COURSE WILL BE WEIGHTED ON-->

<dom-module id="add-assignment">
    <template>
        <div class="form-group">
            <label for="assignment" class="col-lg-2">Assignment %</label>
            <div class="col-lg-5 input-lg">
                <input class="assignment form-control" style="width:30% " type="number" min="0" max="100" id="assignment" placeholder="% weighted">
            </div>
        </div>
    </template>
    <script>
        Polymer({
            is: 'add-assignment',
            ready: function () {

            },
            properties: {},
            listeners: {

            }
        });
    </script>
</dom-module>

